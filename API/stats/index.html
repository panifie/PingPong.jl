<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Stats · PingPong.jl</title><meta name="title" content="Stats · PingPong.jl"/><meta property="og:title" content="Stats · PingPong.jl"/><meta property="twitter:title" content="Stats · PingPong.jl"/><meta name="description" content="Documentation for PingPong.jl."/><meta property="og:description" content="Documentation for PingPong.jl."/><meta property="twitter:description" content="Documentation for PingPong.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../presentation/"><img src="../../assets/logo.png" alt="PingPong.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../presentation/">Why PingPong?</a></li><li><a class="tocitem" href="../../">What is PingPong?</a></li></ul></li><li><a class="tocitem" href="../../types/">Types</a></li><li><a class="tocitem" href="../../strategy/">Strategies</a></li><li><span class="tocitem">Engine</span><ul><li><a class="tocitem" href="../../engine/engine/">Executors</a></li><li><a class="tocitem" href="../../engine/backtesting/">Backtesting</a></li><li><a class="tocitem" href="../../engine/paper/">Paper</a></li><li><a class="tocitem" href="../../engine/live/">Live</a></li><li><a class="tocitem" href="../../engine/features/">Features</a></li></ul></li><li><a class="tocitem" href="../../exchanges/">Exchanges</a></li><li><a class="tocitem" href="../../data/">Data</a></li><li><span class="tocitem">Watchers</span><ul><li><a class="tocitem" href="../../watchers/watchers/">Interface</a></li><li><input class="collapse-toggle" id="menuitem-7-2" type="checkbox"/><label class="tocitem" for="menuitem-7-2"><span class="docs-label">Apis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../watchers/apis/coingecko/">CoinGecko</a></li><li><a class="tocitem" href="../../watchers/apis/coinpaprika/">CoinPaprika</a></li><li><a class="tocitem" href="../../watchers/apis/coinmarketcap/">CoinMarketCap</a></li></ul></li></ul></li><li><a class="tocitem" href="../../stats/">Stats</a></li><li><a class="tocitem" href="../../optimization/">Optimization</a></li><li><a class="tocitem" href="../../plotting/">Plotting</a></li><li><span class="tocitem">Misc</span><ul><li><a class="tocitem" href="../../config/">Config</a></li><li><a class="tocitem" href="../../disambiguation/">Disambiguation (Glossary)</a></li><li><a class="tocitem" href="../../troubleshooting/">Troubleshooting</a></li><li><a class="tocitem" href="../../devdocs/">Devdocs</a></li><li><a class="tocitem" href="../../contacts/">Contacts</a></li></ul></li><li><span class="tocitem">Customizations</span><ul><li><a class="tocitem" href="../../customizations/customizations/">Overview</a></li><li><a class="tocitem" href="../../customizations/orders/">Orders</a></li><li><a class="tocitem" href="../../customizations/backtest/">Backtester</a></li><li><a class="tocitem" href="../../customizations/exchanges/">Exchanges</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../collections/">Collections</a></li><li><a class="tocitem" href="../data/">Data</a></li><li><a class="tocitem" href="../ccxt/">Ccxt</a></li><li><a class="tocitem" href="../dfutils/">DataFrame utils</a></li><li><a class="tocitem" href="../executors/">Executors</a></li><li><a class="tocitem" href="../exchanges/">Exchanges</a></li><li><a class="tocitem" href="../fetch/">Fetch module</a></li><li><a class="tocitem" href="../engine/">Engine</a></li><li><a class="tocitem" href="../instances/">Instances</a></li><li><a class="tocitem" href="../instruments/">Instruments</a></li><li><a class="tocitem" href="../misc/">Misc</a></li><li><a class="tocitem" href="../optimization/">Optimization</a></li><li><a class="tocitem" href="../pbar/">Pbar</a></li><li><a class="tocitem" href="../plotting/">Plotting</a></li><li><a class="tocitem" href="../prices/">Prices</a></li><li><a class="tocitem" href="../processing/">Processing</a></li><li><a class="tocitem" href="../python/">Python</a></li><li class="is-active"><a class="tocitem" href>Stats</a></li><li><a class="tocitem" href="../strategies/">Strategies</a></li><li><input class="collapse-toggle" id="menuitem-13-20" type="checkbox"/><label class="tocitem" for="menuitem-13-20"><span class="docs-label">Analysis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../analysis/analysis/">Analysis</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Stats</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Stats</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/panifie/PingPong.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/panifie/PingPong.jl/blob/master/docs/src/API/stats.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Stats"><a class="docs-heading-anchor" href="#Stats">Stats</a><a id="Stats-1"></a><a class="docs-heading-anchor-permalink" href="#Stats" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.METRICS" href="#Stats.METRICS"><code>Stats.METRICS</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>All the metrics that supported.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.TradesTuple" href="#Stats.TradesTuple"><code>Stats.TradesTuple</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A NamedTuple representing trade data, including <code>date</code>, <code>amount</code>, <code>price</code>, <code>value</code>, <code>fees</code>, <code>fees_base</code>, <code>size</code>, <code>leverage</code>, <code>entryprice</code>, and <code>order</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._annualize-Tuple{Any, Any}" href="#Stats._annualize-Tuple{Any, Any}"><code>Stats._annualize</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Annualizes a volatility value.</p><pre><code class="language-julia hljs">_annualize(v, tf)
</code></pre><p>This function takes a volatility value <code>v</code> and a timeframe <code>tf</code> as parameters. It multiplies <code>v</code> by the square root of the ratio of the number of days in a year times the period of <code>tf</code> to the period of a day. This effectively converts <code>v</code> from a volatility per <code>tf</code> period to an annual volatility.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L44-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._cum_value_balance-Tuple{Instances.AssetInstance{&lt;:AbstractAsset, &lt;:ExchangeID, M} where M&lt;:Misc.WithMargin, Any}" href="#Stats._cum_value_balance-Tuple{Instances.AssetInstance{&lt;:AbstractAsset, &lt;:ExchangeID, M} where M&lt;:Misc.WithMargin, Any}"><code>Stats._cum_value_balance</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Calculates the cumulative value balance for a MarginInstance.</p><pre><code class="language-julia hljs">_cum_value_balance(
    ai::Instances.AssetInstance{&lt;:AbstractAsset, &lt;:ExchangeID, M} where M&lt;:Misc.WithMargin,
    df
) -&gt; Any
</code></pre><p>This function takes a <code>MarginInstance</code> <code>ai</code> and a DataFrame <code>df</code> as parameters.  It defines a helper function <code>cvb</code> that calculates the value of an order based on various parameters,  and updates some variables (<code>last_lev</code>, <code>last_ep</code>, <code>last_side</code>) with the details of the last non-missing order.</p><p>The function then applies <code>cvb</code> to each order in <code>df</code>, along with the corresponding <code>ai</code>, <code>entryprice</code>, <code>cum_base</code>, <code>leverage</code>, and <code>close</code> values from <code>df</code>. The earned amounts for each order are returned as a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_balance.jl#L46-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._earned" href="#Stats._earned"><code>Stats._earned</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Calculates the earned amount in a trade considering <code>entryprice</code>, <code>amount</code>, <code>leverage</code>, <code>price</code>, and <code>fees</code>.</p><pre><code class="language-julia hljs">_earned(
    o,
    entryprice,
    amount,
    leverage,
    price,
    value,
    fees
) -&gt; Any
_earned(
    o,
    entryprice,
    amount,
    leverage,
    price,
    value,
    fees,
    fees_base
) -&gt; Any
</code></pre><p>The function computes the earned amount as the absolute value of the product of <code>entryprice</code> and <code>amount</code> divided by <code>leverage</code>, plus the profit and loss (pnl) calculated from the <code>entryprice</code>, <code>price</code>, <code>amount</code>, and the position side of the order, minus <code>fees</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L66-L72">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._rawcalmar-Tuple{Any}" href="#Stats._rawcalmar-Tuple{Any}"><code>Stats._rawcalmar</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the non-annualized Calmar ratio.</p><pre><code class="language-julia hljs">_rawcalmar(returns; tf) -&gt; Any
</code></pre><p>Calculates the Calmar ratio given an array of <code>returns</code>. The ratio is the annual return divided by the maximum drawdown. <code>tf</code> specifies the timeframe for the returns and defaults to one day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L113-L122">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._rawexpectancy-Tuple{Any}" href="#Stats._rawexpectancy-Tuple{Any}"><code>Stats._rawexpectancy</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the trading expectancy.</p><pre><code class="language-julia hljs">_rawexpectancy(returns) -&gt; Any
</code></pre><p>Calculates the trading expectancy given an array of <code>returns</code>. This is a measure of the mean value of both winning and losing trades. It takes into account both the probability and the average win/loss of trades.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L172-L181">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._rawsharpe-Tuple{Any}" href="#Stats._rawsharpe-Tuple{Any}"><code>Stats._rawsharpe</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the non-annualized Sharpe ratio.</p><pre><code class="language-julia hljs">_rawsharpe(returns; rfr, tf) -&gt; Any
</code></pre><p>Calculates the Sharpe ratio given an array of <code>returns</code>. The ratio is computed as the excess of the mean return over the risk-free rate <code>rfr</code>, divided by the standard deviation of the <code>returns</code>. <code>tf</code> specifies the timeframe for the returns and defaults to one day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L54-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._rawsortino-Tuple{Any}" href="#Stats._rawsortino-Tuple{Any}"><code>Stats._rawsortino</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the non-annualized Sortino ratio.</p><pre><code class="language-julia hljs">_rawsortino(returns; rfr, tf) -&gt; Any
</code></pre><p>Calculates the Sortino ratio given an array of <code>returns</code>. The ratio is the excess of the mean return over the risk-free rate <code>rfr</code>, divided by the standard deviation of the negative <code>returns</code>. <code>tf</code> specifies the timeframe for the returns and defaults to one day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L83-L92">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._returns_arr-Tuple{Any}" href="#Stats._returns_arr-Tuple{Any}"><code>Stats._returns_arr</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Calculates the simple returns for an array of prices.</p><pre><code class="language-julia hljs">_returns_arr(arr)
</code></pre><p>This function takes an array of prices <code>arr</code> as a parameter, calculates the differences between successive prices, divides each difference by the corresponding previous price, and returns the resulting array of simple returns. Please note that the first element of the return array would be <code>NaN</code> due to the lack of a previous price for the first element in <code>arr</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L32-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._spent-NTuple{8, Any}" href="#Stats._spent-NTuple{8, Any}"><code>Stats._spent</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Calculates the spent amount in a trade considering <code>leverage</code>, <code>value</code> and <code>fees</code>.</p><pre><code class="language-julia hljs">_spent(
    _,
    _,
    _,
    leverage,
    price,
    value,
    fees,
    fees_base
) -&gt; Any
</code></pre><p>The function calculates the spent amount as the <code>value</code> divided by <code>leverage</code> plus <code>fees</code>, and returns the negative absolute value of this amount.  An assertion ensures that the calculated value is non-negative before negation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L54-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._tradesdf" href="#Stats._tradesdf"><code>Stats._tradesdf</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Retrieves trades from an <code>AssetInstance</code> within a specified range and transforms them into a DataFrame.</p><pre><code class="language-julia hljs">_tradesdf(
    ai::Instances.AssetInstance
) -&gt; Union{Nothing, DataFrames.DataFrame}
_tradesdf(
    ai::Instances.AssetInstance,
    from
) -&gt; Union{Nothing, DataFrames.DataFrame}
_tradesdf(
    ai::Instances.AssetInstance,
    from,
    to
) -&gt; Union{Nothing, DataFrames.DataFrame}
</code></pre><p>The function retrieves trades within this range and then transforms them into a DataFrame using the <code>_tradesdf()</code> function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L29-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._tradesdf-Tuple{AbstractVector}" href="#Stats._tradesdf-Tuple{AbstractVector}"><code>Stats._tradesdf</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Transforms an <code>AbstractVector</code> of trades into a DataFrame.</p><pre><code class="language-julia hljs">_tradesdf(trades::AbstractVector) -&gt; DataFrames.DataFrame
</code></pre><p>The function creates an empty DataFrame from <code>TradesTuple</code> and appends the trades. Afterwards, it renames the <code>:date</code> column to <code>:timestamp</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L15-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._valueat" href="#Stats._valueat"><code>Stats._valueat</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Calculates the value of a position at a given timestamp.</p><pre><code class="language-julia hljs">_valueat(
    ai,
    cum_amount,
    timestamp,
    leverage,
    entryprice,
    pos,
    fees
)
_valueat(
    ai,
    cum_amount,
    timestamp,
    leverage,
    entryprice,
    pos,
    fees,
    fees_base
)
</code></pre><p>This function takes a <code>MarginInstance</code> <code>ai</code>, a <code>cum_amount</code>, a <code>timestamp</code>, a <code>leverage</code>, an <code>entryprice</code>, and a position <code>pos</code> as parameters. It first calculates the closing price at the given timestamp, the value of the position based on the cumulative amount and the closing price, and the fees based on this value. It then returns the earned amount based on these values, using the <code>_earned</code> function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_balance.jl#L134-L142">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats._valueat-Tuple{Instances.AssetInstance{&lt;:AbstractAsset, &lt;:ExchangeID, NoMargin}, Any, Any, Vararg{Any}}" href="#Stats._valueat-Tuple{Instances.AssetInstance{&lt;:AbstractAsset, &lt;:ExchangeID, NoMargin}, Any, Any, Vararg{Any}}"><code>Stats._valueat</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Calculates the value of a position at a given timestamp for a NoMarginInstance.</p><pre><code class="language-julia hljs">_valueat(ai, cum_amount, timestamp, args)
</code></pre><p>This function takes a <code>NoMarginInstance</code> <code>ai</code>, a <code>cum_amount</code>, and a <code>timestamp</code> as parameters, along with any number of additional arguments. It calculates the value of the position as the product of the cumulative amount and the closing price at the given timestamp, and returns this value. Note: For a <code>NoMarginInstance</code>, leverage is not considered, hence the value is directly dependent on the cumulative amount and the closing price.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_balance.jl#L124-L132">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.applytimeframe!-Tuple{Any, Any}" href="#Stats.applytimeframe!-Tuple{Any, Any}"><code>Stats.applytimeframe!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Applies a given timeframe to the timestamps in a DataFrame.</p><pre><code class="language-julia hljs">applytimeframe!(df, tf) -&gt; Any
</code></pre><p>This function removes the <code>sample</code> column from the DataFrame <code>df</code> and applies the <code>tf</code> timeframe to the <code>timestamp</code> column.  The DataFrame is then returned with the updated timestamps.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L172-L179">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.aroundtrades-Tuple{Any, Any}" href="#Stats.aroundtrades-Tuple{Any, Any}"><code>Stats.aroundtrades</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Provides trade data for a given asset instance around a specified timeframe.</p><pre><code class="language-julia hljs">aroundtrades(ai, tf)
</code></pre><p>It calculates a start and a stop date based on the dates of the first and last trades in the <code>AssetInstance</code> history and the specified timeframe. It then extracts the OHLCV data for the <code>AssetInstance</code> within this date range, and resamples this data to the specified timeframe. The resultant resampled DataFrame is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_balance.jl#L29-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.bydate-Tuple{Any, Any, Vararg{Any}}" href="#Stats.bydate-Tuple{Any, Any, Vararg{Any}}"><code>Stats.bydate</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Groups trade data by date and other specified tags.</p><pre><code class="language-julia hljs">bydate(
    data,
    tf,
    tags...;
    sort
) -&gt; DataFrames.GroupedDataFrame
</code></pre><p>The function converts timestamps in <code>data</code> to a suitable format based on <code>tf</code> and then groups the data by the specified <code>tags</code> and the converted timestamps.  The <code>sort</code> parameter determines whether the resulting grouped data should be sorted or not.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L159-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.cagr" href="#Stats.cagr"><code>Stats.cagr</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Computes the Compound Annual Growth Rate (CAGR) for a given strategy.</p><pre><code class="language-julia hljs">cagr(s::Strategies.Strategy) -&gt; Any
cagr(s::Strategies.Strategy, prd::Dates.Period) -&gt; Any
cagr(
    s::Strategies.Strategy,
    prd::Dates.Period,
    initial
) -&gt; Any
cagr(
    s::Strategies.Strategy,
    prd::Dates.Period,
    initial,
    price_func
) -&gt; Any
</code></pre><p>Calculates the CAGR for a <code>Strategy</code> <code>s</code> over a specified <code>Period</code> <code>prd</code>, defaulting to the period of the strategy&#39;s trades. The initial cash amount <code>initial</code> and the pricing function <code>price_func</code> can also be specified.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L211-L219">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.calmar" href="#Stats.calmar"><code>Stats.calmar</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Computes the Calmar ratio for a given strategy.</p><pre><code class="language-julia hljs">calmar(s::Strategies.Strategy)
calmar(s::Strategies.Strategy, tf) -&gt; Any
</code></pre><p>Calculates the Calmar ratio for a <code>Strategy</code> <code>s</code> over a specified timeframe <code>tf</code>, defaulting to one day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L159-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.entryexit-Tuple{Any}" href="#Stats.entryexit-Tuple{Any}"><code>Stats.entryexit</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Counts the number of entries and exits in a trade.</p><pre><code class="language-julia hljs">entryexit(
    g
) -&gt; NamedTuple{(:entries, :exits), &lt;:Tuple{Any, Any}}
</code></pre><p>The function takes a trade as input, counts the number of entries (negative values) and exits (positive values) and returns a tuple with these counts.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L47-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.expand" href="#Stats.expand"><code>Stats.expand</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Expands a DataFrame to include all timestamps in a range.</p><pre><code class="language-julia hljs">expand(df) -&gt; Any
expand(df, tf) -&gt; Any
</code></pre><p>This function takes a DataFrame <code>df</code> and an optional timeframe <code>tf</code> (which defaults to the timeframe of <code>df</code>). It creates a new DataFrame that includes all timestamps within the range of <code>df</code> and the given timeframe, and then joins this new DataFrame with <code>df</code> using an outer join on the <code>timestamp</code> column. The resulting DataFrame is then sorted by <code>timestamp</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L212-L220">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.expectancy" href="#Stats.expectancy"><code>Stats.expectancy</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Computes the trading expectancy for a given strategy.</p><pre><code class="language-julia hljs">expectancy(s::Strategies.Strategy)
expectancy(s::Strategies.Strategy, tf) -&gt; Any
</code></pre><p>Calculates the trading expectancy for a <code>Strategy</code> <code>s</code> over a specified timeframe <code>tf</code>, defaulting to one day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L198-L205">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.ffill!" href="#Stats.ffill!"><code>Stats.ffill!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Forward fills missing values in a vector.</p><pre><code class="language-julia hljs">ffill!(v)
ffill!(v, out)
</code></pre><p>This function takes a vector <code>v</code> and an optional output vector <code>out</code> (which defaults to <code>v</code> itself). It starts with the first value in <code>v</code> (which must not be missing) and applies the <code>coalesce</code> function to each subsequent pair of values in <code>v</code> and <code>out</code>. The <code>coalesce</code> function replaces each missing value in <code>v</code> with the corresponding value from <code>out</code>. The function then returns <code>out</code> with the filled missing values. This is effectively a forward fill operation, carrying the most recent non-missing value forward to replace missing values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_balance.jl#L281-L291">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.isincreaseorder-Tuple{O} where O&lt;:(OrderTypes.IncreaseOrder)" href="#Stats.isincreaseorder-Tuple{O} where O&lt;:(OrderTypes.IncreaseOrder)"><code>Stats.isincreaseorder</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Checks if an <code>Order</code> is an <code>IncreaseOrder</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.isreduceorder-Tuple{O} where O&lt;:(OrderTypes.ReduceOrder)" href="#Stats.isreduceorder-Tuple{O} where O&lt;:(OrderTypes.ReduceOrder)"><code>Stats.isreduceorder</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Checks if an <code>Order</code> is a <code>ReduceOrder</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.maxdd-Tuple{Any}" href="#Stats.maxdd-Tuple{Any}"><code>Stats.maxdd</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the maximum drawdown for a series of returns.</p><pre><code class="language-julia hljs">maxdd(
    returns
) -&gt; NamedTuple{(:dd, :ath, :cum_returns), &lt;:Tuple{Any, Any, Any}}
</code></pre><p>Calculates the maximum drawdown given an array of <code>returns</code>. The drawdown is the largest percentage drop in the cumulative product of 1 plus the returns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L128-L136">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.multi-Tuple{Strategies.Strategy, Vararg{Symbol}}" href="#Stats.multi-Tuple{Strategies.Strategy, Vararg{Symbol}}"><code>Stats.multi</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Returns a dict of calculated metrics for a given strategy.</p><pre><code class="language-julia hljs">multi(
    s::Strategies.Strategy,
    metrics::Symbol...;
    tf,
    normalize,
    norm_max
)
</code></pre><p>For a <code>Strategy</code> <code>s</code>, calculates specified <code>metrics</code> over a specified timeframe <code>tf</code>, defaulting to one day. If <code>normalize</code> is <code>true</code>, the metrics are normalized with respect to <code>norm_max</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L229-L237">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.normalize_metric" href="#Stats.normalize_metric"><code>Stats.normalize_metric</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Normalize a metric. Based on the value of <code>max</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L280">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.resample_trades" href="#Stats.resample_trades"><code>Stats.resample_trades</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Aggregates all trades of a strategy in a single dataframe</p><pre><code class="language-julia hljs">resample_trades(s::Strategies.Strategy; ...) -&gt; Any
resample_trades(
    s::Strategies.Strategy,
    tf;
    style,
    byinstance,
    custom,
    expand_dates
) -&gt; Any
</code></pre><p><code>byinstance</code>: <code>(trades_df, ai) -&gt; nothing</code> can modify the dataframe of a single instance before it is appended to the full df. <code>style</code>: <code>:full</code> or <code>:minimal</code> specifies what columns should be aggregated in the resampled df <code>custom</code>: similar to <code>style</code> but instead allows you to define custom aggregation rules (according to <code>DataFrame</code>) <code>expand_dates</code>: returns a contiguous dataframe from the first trade date to the last (inserting default ohlcv rows where no trades have happened.)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L227-L237">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.resample_trades-Tuple{Instances.AssetInstance, Any}" href="#Stats.resample_trades-Tuple{Instances.AssetInstance, Any}"><code>Stats.resample_trades</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Resamples trades data from a smaller to a higher timeframe.</p><pre><code class="language-julia hljs">resample_trades(
    ai::Instances.AssetInstance,
    to_tf;
    style,
    custom
) -&gt; Any
</code></pre><p>This function takes an <code>AssetInstance</code> and a target timeframe <code>to_tf</code> as parameters, as well as optional <code>style</code> and <code>custom</code> parameters for additional customization. It extracts the trades data from the <code>AssetInstance</code> and resamples it to the target timeframe.  Volume adjustments are made based on the margin mode of the <code>AssetInstance</code>. The data is then grouped by date, transformed according to the margin mode, style, and custom parameters, and combined into a new DataFrame.  Finally, the target timeframe is applied to the timestamps in the DataFrame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L185-L195">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.sharpe" href="#Stats.sharpe"><code>Stats.sharpe</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Computes the Sharpe ratio for a given strategy.</p><pre><code class="language-julia hljs">sharpe(s::Strategies.Strategy; ...)
sharpe(s::Strategies.Strategy, tf; rfr) -&gt; Any
</code></pre><p>Calculates the Sharpe ratio for a <code>Strategy</code> <code>s</code> over a specified timeframe <code>tf</code>, defaulting to one day. The risk-free rate <code>rfr</code> can be specified, and defaults to 0.0.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L69-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.sortino" href="#Stats.sortino"><code>Stats.sortino</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Computes the Sortino ratio for a given strategy.</p><pre><code class="language-julia hljs">sortino(s::Strategies.Strategy; ...)
sortino(s::Strategies.Strategy, tf; rfr) -&gt; Any
</code></pre><p>Calculates the Sortino ratio for a <code>Strategy</code> <code>s</code> over a specified timeframe <code>tf</code>, defaulting to one day. The risk-free rate <code>rfr</code> can be specified, and defaults to 0.0.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L99-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_balance-Tuple{Instances.AssetInstance}" href="#Stats.trades_balance-Tuple{Instances.AssetInstance}"><code>Stats.trades_balance</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Replays the trade history of a single asset instance.</p><pre><code class="language-julia hljs">trades_balance(
    ai::Instances.AssetInstance;
    tf,
    return_all,
    df,
    initial_cash
) -&gt; Any
</code></pre><p><code>return_all</code>: if <code>true</code> returns a dataframe where:</p><ul><li><code>base/quote_balance</code> the volume generated by the trades that happened at that timestamp.</li><li><code>:cum_total</code> represents the total balance held for each timestamp.</li><li><code>:cum_value_balance</code> represents the value in quote currency of the asset for each timestamp.</li></ul><div class="admonition is-warning"><header class="admonition-header">For single assets only</header><div class="admonition-body"><p>If your strategy trades multiple assets the profits returned by this function won&#39;t match the strategy actual holdings since calculation are done only w.r.t this single asset.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_balance.jl#L75-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_balance-Tuple{Strategies.Strategy}" href="#Stats.trades_balance-Tuple{Strategies.Strategy}"><code>Stats.trades_balance</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Plots the trade history for all the assets in a strategy.</p><pre><code class="language-julia hljs">trades_balance(s; tf, return_all, byasset, kwargs...)
</code></pre><p><code>return_all</code>[<code>true</code>]: similar to the function for single assets, plus:</p><ul><li><code>cum_quote</code>: the balance of cash for each timestamp</li><li><code>cum_value_balance</code>: the balance of all held assets in quote currency for each timestamp.</li></ul><p><code>byasset</code>[<code>false</code>]: also return a column that tracks the value balance by asset for each timestamp <code>normalize_timeframes</code>:</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_balance.jl#L158-L169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_duration-Tuple{Instances.AssetInstance}" href="#Stats.trades_duration-Tuple{Instances.AssetInstance}"><code>Stats.trades_duration</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the average duration of trades for an asset instance.</p><pre><code class="language-julia hljs">trades_duration(ai::Instances.AssetInstance; raw, f) -&gt; Any
</code></pre><p>Calculates the average duration between trades for an <code>AssetInstance</code> <code>ai</code>. The <code>raw</code> parameter determines whether the result should be in raw format (in milliseconds) or a compact time format. The function <code>f</code> is used to aggregate the durations and defaults to the mean.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_metrics.jl#L4-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_duration-Tuple{Strategies.Strategy}" href="#Stats.trades_duration-Tuple{Strategies.Strategy}"><code>Stats.trades_duration</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the average duration of trades for a strategy.</p><pre><code class="language-julia hljs">trades_duration(s::Strategies.Strategy; f) -&gt; Any
</code></pre><p>Calculates the average duration between trades for a <code>Strategy</code> <code>s</code>. The function <code>f</code> is used to aggregate the durations and defaults to the mean.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_metrics.jl#L24-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_hour-Tuple{Instances.AssetInstance}" href="#Stats.trades_hour-Tuple{Instances.AssetInstance}"><code>Stats.trades_hour</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the average hour of trades for an asset instance.</p><pre><code class="language-julia hljs">trades_hour(ai::Instances.AssetInstance; f) -&gt; Any
</code></pre><p>Calculates the average hour of trades for an <code>AssetInstance</code> <code>ai</code>. The function <code>f</code> is used to aggregate the hours and defaults to the mean.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_metrics.jl#L78-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_leverage-Tuple{Instances.AssetInstance}" href="#Stats.trades_leverage-Tuple{Instances.AssetInstance}"><code>Stats.trades_leverage</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the average leverage for trades of an asset instance.</p><pre><code class="language-julia hljs">trades_leverage(ai::Instances.AssetInstance; f) -&gt; Any
</code></pre><p>Calculates the average leverage of trades for an <code>AssetInstance</code> <code>ai</code>. The function <code>f</code> is used to aggregate the leverages and defaults to the mean.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_metrics.jl#L65-L73">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_monthday-Tuple{Instances.AssetInstance}" href="#Stats.trades_monthday-Tuple{Instances.AssetInstance}"><code>Stats.trades_monthday</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the average day of the month for trades of an asset instance.</p><pre><code class="language-julia hljs">trades_monthday(ai::Instances.AssetInstance; f) -&gt; Any
</code></pre><p>Calculates the average day of the month for trades for an <code>AssetInstance</code> <code>ai</code>. The function <code>f</code> is used to aggregate the days and defaults to the mean.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_metrics.jl#L105-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_size-Tuple{Instances.AssetInstance}" href="#Stats.trades_size-Tuple{Instances.AssetInstance}"><code>Stats.trades_size</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the average trade size for an asset instance.</p><pre><code class="language-julia hljs">trades_size(ai::Instances.AssetInstance; f) -&gt; Any
</code></pre><p>Calculates the average size of trades for an <code>AssetInstance</code> <code>ai</code>. The function <code>f</code> is used to aggregate the sizes and defaults to the mean.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_metrics.jl#L40-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_size-Tuple{Strategies.Strategy}" href="#Stats.trades_size-Tuple{Strategies.Strategy}"><code>Stats.trades_size</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the average trade size for a strategy.</p><pre><code class="language-julia hljs">trades_size(s::Strategies.Strategy; f) -&gt; Any
</code></pre><p>Calculates the average size of trades for a <code>Strategy</code> <code>s</code>. The function <code>f</code> is used to aggregate the sizes and defaults to the mean.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_metrics.jl#L53-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.trades_weekday-Tuple{Instances.AssetInstance}" href="#Stats.trades_weekday-Tuple{Instances.AssetInstance}"><code>Stats.trades_weekday</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the average weekday of trades for an asset instance.</p><pre><code class="language-julia hljs">trades_weekday(ai::Instances.AssetInstance; f) -&gt; Any
</code></pre><p>Calculates the average weekday of trades for an <code>AssetInstance</code> <code>ai</code>. The function <code>f</code> is used to aggregate the weekdays and defaults to the mean.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_metrics.jl#L92-L100">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.tradesvolume!-Tuple{Misc.WithMargin, Any}" href="#Stats.tradesvolume!-Tuple{Misc.WithMargin, Any}"><code>Stats.tradesvolume!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Entries subtract quote currency, Exits subtract base currency.</p><pre><code class="language-julia hljs">tradesvolume!(_::Misc.WithMargin, data) -&gt; Any
</code></pre><p>This function adjusts the volume of trades in the <code>WithMargin</code> mode.  It assigns <code>size</code> to <code>quote_volume</code> and <code>amount</code> to <code>base_volume</code> in the <code>data</code>.  It then modifies these volumes based on whether each order in <code>data</code> is an increase order or not.  For non-increase orders, <code>base_volume</code> is made non-positive and <code>quote_volume</code> is made non-negative.  For increase orders, <code>base_volume</code> is made non-negative and <code>quote_volume</code> is made non-positive.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L138-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.tradesvolume!-Tuple{NoMargin, Any}" href="#Stats.tradesvolume!-Tuple{NoMargin, Any}"><code>Stats.tradesvolume!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Buys subtract quote currency, while sells subtract base currency.</p><pre><code class="language-julia hljs">tradesvolume!(_::NoMargin, data)
</code></pre><p>This function adjusts the volume of trades in the <code>NoMargin</code> mode. It assigns <code>size</code> to <code>quote_volume</code> and <code>amount</code> to <code>base_volume</code> in the <code>data</code>. In debug mode, it asserts that all sell orders have non-positive base volume and non-negative quote volume, and all buy orders have non-negative base volume and non-positive quote volume.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L115-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.transforms-Tuple{Misc.MarginMode, Any, Any}" href="#Stats.transforms-Tuple{Misc.MarginMode, Any, Any}"><code>Stats.transforms</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Applies custom transformations based on margin mode, style, and custom parameters.</p><pre><code class="language-julia hljs">transforms(m::Misc.MarginMode, style, custom) -&gt; Vector{Any}
</code></pre><p>Depending on the provided <code>MarginMode</code>, <code>style</code> and <code>custom</code> parameters, this function applies different transformations to the data. The customization allows for flexibility in data processing and analysis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_resample.jl#L81-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.zeromissing!-Tuple{Any}" href="#Stats.zeromissing!-Tuple{Any}"><code>Stats.zeromissing!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Replaces missing values in a vector with 0.0.</p><pre><code class="language-julia hljs">zeromissing!(v)
</code></pre><p>This function iterates over each index of the vector <code>v</code>.  If the value at a given index is missing, it replaces it with 0.0.  The vector <code>v</code> is then returned with the replaced values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/trades_balance.jl#L7-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Stats.@balance_arr-Tuple{}" href="#Stats.@balance_arr-Tuple{}"><code>Stats.@balance_arr</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Generates code to calculate the cumulative total balance for a given set of trades over a given timeframe.</p><p>This macro generates code that calculates the cumulative total balance for a given set of trades <code>s</code> over a given timeframe <code>tf</code>. It first gets a DataFrame of balances for <code>s</code> and <code>tf</code> using the <code>trades_balance</code> function. If this DataFrame is <code>nothing</code> (which means there are no trades), it immediately returns <code>-Inf</code>. Otherwise, it extracts the <code>cum_total</code> column from the DataFrame, which represents the cumulative total balance, and assigns this to <code>balance</code>. The generated code is then returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/panifie/PingPong.jl/blob/f84630458649ce0aa0376d7a69f5a2c92857f0d5/Stats/src/metrics.jl#L11-L21">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../python/">« Python</a><a class="docs-footer-nextpage" href="../strategies/">Strategies »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Tuesday 13 August 2024 15:49">Tuesday 13 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
