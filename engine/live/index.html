<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Live · PingPong.jl</title><meta name="title" content="Live · PingPong.jl"/><meta property="og:title" content="Live · PingPong.jl"/><meta property="twitter:title" content="Live · PingPong.jl"/><meta name="description" content="Documentation for PingPong.jl."/><meta property="og:description" content="Documentation for PingPong.jl."/><meta property="twitter:description" content="Documentation for PingPong.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../presentation/"><img src="../../assets/logo.png" alt="PingPong.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../presentation/">Why PingPong?</a></li><li><a class="tocitem" href="../../">What is PingPong?</a></li></ul></li><li><a class="tocitem" href="../../types/">Types</a></li><li><a class="tocitem" href="../../strategy/">Strategies</a></li><li><span class="tocitem">Engine</span><ul><li><a class="tocitem" href="../engine/">Executors</a></li><li><a class="tocitem" href="../backtesting/">Backtesting</a></li><li><a class="tocitem" href="../paper/">Paper</a></li><li class="is-active"><a class="tocitem" href>Live</a><ul class="internal"><li><a class="tocitem" href="#How-Live-Mode-Works"><span>How Live Mode Works</span></a></li><li><a class="tocitem" href="#Timeouts"><span>Timeouts</span></a></li></ul></li><li><a class="tocitem" href="../features/">Features</a></li></ul></li><li><a class="tocitem" href="../../exchanges/">Exchanges</a></li><li><a class="tocitem" href="../../data/">Data</a></li><li><span class="tocitem">Watchers</span><ul><li><a class="tocitem" href="../../watchers/watchers/">Interface</a></li><li><input class="collapse-toggle" id="menuitem-7-2" type="checkbox"/><label class="tocitem" for="menuitem-7-2"><span class="docs-label">Apis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../watchers/apis/coingecko/">CoinGecko</a></li><li><a class="tocitem" href="../../watchers/apis/coinpaprika/">CoinPaprika</a></li><li><a class="tocitem" href="../../watchers/apis/coinmarketcap/">CoinMarketCap</a></li></ul></li></ul></li><li><a class="tocitem" href="../../stats/">Stats</a></li><li><a class="tocitem" href="../../optimization/">Optimization</a></li><li><a class="tocitem" href="../../plotting/">Plotting</a></li><li><span class="tocitem">Misc</span><ul><li><a class="tocitem" href="../../config/">Config</a></li><li><a class="tocitem" href="../../disambiguation/">Disambiguation (Glossary)</a></li><li><a class="tocitem" href="../../troubleshooting/">Troubleshooting</a></li><li><a class="tocitem" href="../../devdocs/">Devdocs</a></li><li><a class="tocitem" href="../../contacts/">Contacts</a></li></ul></li><li><span class="tocitem">Customizations</span><ul><li><a class="tocitem" href="../../customizations/customizations/">Overview</a></li><li><a class="tocitem" href="../../customizations/orders/">Orders</a></li><li><a class="tocitem" href="../../customizations/backtest/">Backtester</a></li><li><a class="tocitem" href="../../customizations/exchanges/">Exchanges</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../API/collections/">Collections</a></li><li><a class="tocitem" href="../../API/data/">Data</a></li><li><a class="tocitem" href="../../API/ccxt/">Ccxt</a></li><li><a class="tocitem" href="../../API/dfutils/">DataFrame utils</a></li><li><a class="tocitem" href="../../API/executors/">Executors</a></li><li><a class="tocitem" href="../../API/exchanges/">Exchanges</a></li><li><a class="tocitem" href="../../API/fetch/">Fetch module</a></li><li><a class="tocitem" href="../../API/engine/">Engine</a></li><li><a class="tocitem" href="../../API/instances/">Instances</a></li><li><a class="tocitem" href="../../API/instruments/">Instruments</a></li><li><a class="tocitem" href="../../API/misc/">Misc</a></li><li><a class="tocitem" href="../../API/optimization/">Optimization</a></li><li><a class="tocitem" href="../../API/pbar/">Pbar</a></li><li><a class="tocitem" href="../../API/plotting/">Plotting</a></li><li><a class="tocitem" href="../../API/prices/">Prices</a></li><li><a class="tocitem" href="../../API/processing/">Processing</a></li><li><a class="tocitem" href="../../API/python/">Python</a></li><li><a class="tocitem" href="../../API/stats/">Stats</a></li><li><a class="tocitem" href="../../API/strategies/">Strategies</a></li><li><input class="collapse-toggle" id="menuitem-13-20" type="checkbox"/><label class="tocitem" for="menuitem-13-20"><span class="docs-label">Analysis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../API/analysis/analysis/">Analysis</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Engine</a></li><li class="is-active"><a href>Live</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Live</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/panifie/PingPong.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/panifie/PingPong.jl/blob/master/docs/src/engine/live.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Running-in-Live-Mode"><a class="docs-heading-anchor" href="#Running-in-Live-Mode">Running in Live Mode</a><a id="Running-in-Live-Mode-1"></a><a class="docs-heading-anchor-permalink" href="#Running-in-Live-Mode" title="Permalink"></a></h1><p>A strategy in live mode operates against the exchange API defined by the strategy. To construct the strategy, use the same methods as in <a href="../paper/">paper mode</a>.</p><pre><code class="language-julia hljs">using Strategies
s = strategy(:Example, mode=Live(), sandbox=false) # The &#39;sandbox&#39; parameter is passed to the strategy `ping!(::Type, ::Any, ::LoadStrategy)` function
start!(s, foreground=true)</code></pre><h2 id="How-Live-Mode-Works"><a class="docs-heading-anchor" href="#How-Live-Mode-Works">How Live Mode Works</a><a id="How-Live-Mode-Works-1"></a><a class="docs-heading-anchor-permalink" href="#How-Live-Mode-Works" title="Permalink"></a></h2><p>When you start live mode, <code>pong!</code> functions are forwarded to the exchange API to fulfill the request. We set up background tasks to ensure events update the local state in a timely manner. Specifically, we run:</p><ul><li>A <code>Watcher</code> to monitor the balance. This runs in both spot (<code>NoMarginStrategy</code>) and derivatives (<code>MarginStrategy</code>). In the case of spot, the balance updates both the cash of the strategy&#39;s main currency and all the currencies in the strategy universe. For derivatives, it is used only to update the main currency.</li><li>A <code>Watcher</code> to monitor positions when margin is used (<code>MarginStrategy</code>). The number of contracts of the open position represents the cash of the long/short <code>Position</code> in the <code>AssetInstance</code> (<code>MarginInstance</code>). This means that <em>non-zero balances</em> of a currency other than the strategy&#39;s main currency <em>won&#39;t be considered</em>.</li><li>A long-running task that monitors all the order events of an asset. The task starts when a new order is requested and stops if there haven&#39;t been orders open for a while for the subject asset.</li><li>A long-running task that monitors all trade events of an asset. This task starts and stops along with the order background task.</li></ul><p>Similar to other modes, the return value of a <code>pong!</code> function for creating an order will be:</p><ul><li>A <code>Trade</code> if a trade event was observed shortly after the order creation.</li><li><code>missing</code> if the order was successfully created but not immediately executed.</li><li><code>nothing</code> if the order failed to be created, either because of local checks (e.g., not enough cash) or some other exchange error (e.g., API timeout).</li></ul><h2 id="Timeouts"><a class="docs-heading-anchor" href="#Timeouts">Timeouts</a><a id="Timeouts-1"></a><a class="docs-heading-anchor-permalink" href="#Timeouts" title="Permalink"></a></h2><p>If you don&#39;t want to wait for the order processing, you can pass a custom <code>waitfor</code> parameter which limits the amount of time we wait for API responses.</p><pre><code class="language-julia hljs">pong!(s, ai, MarketOrder{Buy}; synced=false, waitfor=Second(0)) # don&#39;t wait</code></pre><p>The <code>synced=true</code> flag is a last-ditch attempt that <em>force fetches</em> updates from the exchange if no new events have been observed by the background tasks after the waiting period expires (default is <code>true</code>).</p><p>The local trades history might diverge from the data sourced from the exchange because not all exchanges support endpoints for fetching trades history or events, therefore trades are emulated from diffing order updates.</p><p>The local state is <em>not persisted</em>. Nothing is saved or loaded from storage. Instead, we sync the most recent history of orders with their respective trades when the strategy starts running. (This behavior might change in the future if need arises.)</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../paper/">« Paper</a><a class="docs-footer-nextpage" href="../features/">Features »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Wednesday 24 July 2024 10:59">Wednesday 24 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
